<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="app">
        <newslist></newslist>
        <gossip></gossip>
    </div>
</body>

</html>
<script src="./lib/vue.js"></script>
<script type="text/html" id="news">
    <div>
        <input type="text" v-model="message" placeholder="æ–°å¢æ–°é—»" @keyup.enter="add">
        <ul>
            <li v-for="(item, index) in news" >{{item | cutShort('çœç•¥1wå­—') | addHeader |addGreenColor }}</li>
        </ul>
    </div>
</script>
<script type="text/html" id="gossip">
    <div>
        <h2>ğŸ‘©ğŸ‘¨ğŸ‘©ğŸ‘¨ğŸ‘©ğŸ‘¨ğŸ‘©ğŸ‘¨</h2>
        <input type="text" v-model="message" placeholder="æ–°å¢å…«å¦" @keyup.enter="add">
        <ul>
            <li v-for="(item, index) in news" >{{item | cutShort('çœç•¥1wå­—') | addHeader |addGreenColor }}</li>
        </ul>
    </div>
</script>
<script>
    // 1.å®šä¹‰ä¸€ä¸ªåä¸ºnewslistçš„ç»„ä»¶
    /*
        template å¦‚æœè¦ä½¿ç”¨ scriptå†…éƒ¨çš„å†…å®¹ä½œä¸ºæ¨¡æ¿éœ€è¦å†™ä¸Š#
        data å‡½æ•° returnä¸€ä¸ªå¯¹è±¡
        filters å¦‚æœç›´æ¥å†™åœ¨ç»„ä»¶ä¸­ åªæœ‰è¿™ä¸ªç»„ä»¶å¯ä»¥ä½¿ç”¨ 
        å¦‚æœè¦å…¨å±€éƒ½å¯ä»¥ä½¿ç”¨
    */
    // å¤§å†™å­—æ¯ ->å°å†™
    Vue.component('newslist', {
        data: function () {
            return {
                // æ–°é—»æ•°æ®
                news: [],
                // åŒå‘ç»‘å®šçš„æ•°æ®
                message: '',
            }
        },
        template: '#news',
        methods: {
            add() {
                // console.log('æ–°å¢äº†');
                this.news.push(this.message);
                this.message = '';
            }
        }
        ,
        filters: {
            // value éœ€è¦æ˜¾ç¤ºçš„æ•°æ®çš„ åˆå§‹å€¼
            // è¿‡æ»¤çš„å€¼ä¼šä¼ å…¥ç¬¬ä¸€ä¸ªå½¢å‚
            // åœ¨æ¨¡æ¿ä¸­ä¼ é€’çš„å‚æ•° ä¼šä¾æ¬¡è®¾ç½®ç»™ç¬¬äºŒä¸ª,ç¬¬ä¸‰ä¸ªå½¢å‚
            cutShort(value, word) {
                // console.log(value);
                // console.log('è¿‡æ»¤å•¦');
                // return value+'è¢«è¿‡æ»¤å•¦';
                // è¿‡é•¿æ—¶ åªæ˜¾ç¤ºå‰é¢çš„å†…å®¹ åé¢æ‹¼ä¸Š...
                if (value.length > 10) {
                    console.log('è¶Šç•Œå•¦');
                    console.log(value);
                    console.log(word);
                    // æˆªå–å‰é¢çš„10ä¸ª
                    return value.slice(0, 10) + '...' + word;
                } else {
                    return value;
                }
            }
            // å¢åŠ å¤´éƒ¨çš„è¿‡æ»¤å™¨
            , addHeader(value) {
                console.log(value);

                return 'å¹¿å‘Šä½æ‹›ç§Ÿ---' + value;
            }
        }
    })

    // ç»„ä»¶2
    Vue.component('gossip', {
        data: function () {
            return {
                // æ–°é—»æ•°æ®
                news: [],
                // åŒå‘ç»‘å®šçš„æ•°æ®
                message: '',
            }
        },
        template: '#gossip',
        methods: {
            add() {
                // console.log('æ–°å¢äº†');
                this.news.push(this.message);
                this.message = '';
            }
        }
        ,
        filters: {
            // value éœ€è¦æ˜¾ç¤ºçš„æ•°æ®çš„ åˆå§‹å€¼
            // è¿‡æ»¤çš„å€¼ä¼šä¼ å…¥ç¬¬ä¸€ä¸ªå½¢å‚
            // åœ¨æ¨¡æ¿ä¸­ä¼ é€’çš„å‚æ•° ä¼šä¾æ¬¡è®¾ç½®ç»™ç¬¬äºŒä¸ª,ç¬¬ä¸‰ä¸ªå½¢å‚
            cutShort(value, word) {
                // console.log(value);
                // console.log('è¿‡æ»¤å•¦');
                // return value+'è¢«è¿‡æ»¤å•¦';
                // è¿‡é•¿æ—¶ åªæ˜¾ç¤ºå‰é¢çš„å†…å®¹ åé¢æ‹¼ä¸Š...
                if (value.length > 10) {
                    console.log('è¶Šç•Œå•¦');
                    console.log(value);
                    console.log(word);
                    // æˆªå–å‰é¢çš„10ä¸ª
                    return value.slice(0, 10) + '...' + word;
                } else {
                    return value;
                }
            }
            // å¢åŠ å¤´éƒ¨çš„è¿‡æ»¤å™¨
            , addHeader(value) {
                console.log(value);

                return 'å¹¿å‘Šä½æ‹›ç§Ÿ---' + value;
            }
        }
    })


    // 1.5å…¨å±€è¿‡æ»¤å™¨
    Vue.filter('addGreenColor', function (value) {
        return 'ğŸ¥¦'+value
    })


    // 2.å®ä¾‹åŒ–vue
    let app = new Vue({
        el: "#app"
    })

</script>